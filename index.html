<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spelling Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 40px;
            overflow-x: hidden;
        }
        h1 {
            font-size: 28px;
        }
        #nameInput {
            font-size: 20px;
            padding: 8px;
            margin-bottom: 20px;
        }
        #startBtn, #toggleKeyboardBtn {
            font-size: 20px;
            padding: 8px 16px;
            cursor: pointer;
            margin: 0 5px;
        }
        
        #toggleKeyboardBtn {
            background-color: #f0f0f0;
            border: 2px solid #ccc;
            border-radius: 4px;
        }
        
        #toggleKeyboardBtn:hover {
            background-color: #e0e0e0;
            border-color: #999;
        }
        
        #toggleKeyboardBtn.active {
            background-color: #4CAF50;
            color: white;
            border-color: #45a049;
        }
        #targetNameDisplay {
            font-size: 48px;
            font-weight: bold;
            color: #2196F3;
            margin: 20px 0;
            text-align: center;
            letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        #emojiDisplay {
            font-size: 72px;
            text-align: center;
            margin: 30px 0;
            transition: transform 0.3s ease;
        }
        #boxes {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .box {
            width: 60px;
            height: 60px;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        .bravo {
            font-size: 60px;
            font-weight: bold;
            color: green;
            margin-top: 20px;
            animation: bounce 1s infinite alternate;
        }
        @keyframes bounce {
            from { transform: scale(1); }
            to { transform: scale(1.2); }
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: red;
            top: 0;
            animation: fall 2s linear forwards;
        }
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Virtual Keyboard Styles */
        #virtualKeyboard {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .key {
            min-width: 40px;
            height: 50px;
            border: 2px solid #ddd;
            background-color: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            touch-action: manipulation;
        }

        .key:hover, .key:active {
            background-color: #e8e8e8;
            border-color: #999;
            transform: scale(0.95);
        }

        .key.pressed {
            background-color: #4CAF50;
            color: white;
            border-color: #45a049;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px), (pointer: coarse) {
            body {
                padding: 20px 10px;
            }

            .key {
                min-width: 35px;
                height: 45px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
<h1>Spelling Game</h1>
<p>Enter your child‚Äôs name:</p>
<input id="nameInput" type="text" placeholder="Enter name here" />
<button id="startBtn">Start Game</button>
<button id="toggleKeyboardBtn">Show Keyboard</button>

<div id="targetNameDisplay"></div>
<div id="boxes"></div>
<div id="emojiDisplay">üòä</div>

<!-- Virtual Keyboard for Mobile -->
<div id="virtualKeyboard">
    <div class="keyboard-row">
        <div class="key" data-key="Q">Q</div>
        <div class="key" data-key="W">W</div>
        <div class="key" data-key="E">E</div>
        <div class="key" data-key="R">R</div>
        <div class="key" data-key="T">T</div>
        <div class="key" data-key="Y">Y</div>
        <div class="key" data-key="U">U</div>
        <div class="key" data-key="I">I</div>
        <div class="key" data-key="O">O</div>
        <div class="key" data-key="P">P</div>
    </div>
    <div class="keyboard-row">
        <div class="key" data-key="A">A</div>
        <div class="key" data-key="S">S</div>
        <div class="key" data-key="D">D</div>
        <div class="key" data-key="F">F</div>
        <div class="key" data-key="G">G</div>
        <div class="key" data-key="H">H</div>
        <div class="key" data-key="J">J</div>
        <div class="key" data-key="K">K</div>
        <div class="key" data-key="L">L</div>
    </div>
    <div class="keyboard-row">
        <div class="key" data-key="Z">Z</div>
        <div class="key" data-key="X">X</div>
        <div class="key" data-key="C">C</div>
        <div class="key" data-key="V">V</div>
        <div class="key" data-key="B">B</div>
        <div class="key" data-key="N">N</div>
        <div class="key" data-key="M">M</div>
    </div>
    <div class="keyboard-row">
        <div class="key" data-key="ƒå">ƒå</div>
        <div class="key" data-key="ƒÜ">ƒÜ</div>
        <div class="key" data-key="ƒê">ƒê</div>
        <div class="key" data-key="≈†">≈†</div>
        <div class="key" data-key="≈Ω">≈Ω</div>
    </div>
</div>

<!-- Sounds -->
<audio id="correctSound">
    <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg">
</audio>
<audio id="clapSound">
    <source src="https://actions.google.com/sounds/v1/crowds/applause.ogg" type="audio/ogg">
</audio>

<script>
    let targetName = "";
    let currentIndex = 0;
    let isPlaying = false;

    const input = document.getElementById("nameInput");
    const startBtn = document.getElementById("startBtn");
    const toggleKeyboardBtn = document.getElementById("toggleKeyboardBtn");
    const boxesContainer = document.getElementById("boxes");
    const emojiDisplay = document.getElementById("emojiDisplay");
    const correctSound = document.getElementById("correctSound");
    const clapSound = document.getElementById("clapSound");
    const virtualKeyboard = document.getElementById("virtualKeyboard");

    function launchConfetti(particles = 20) {
        for (let i = 0; i < particles; i++) {
            const confetti = document.createElement("div");
            confetti.classList.add("confetti");
            confetti.style.left = Math.random() * window.innerWidth + "px";
            confetti.style.backgroundColor =
                `hsl(${Math.random() * 360}, 100%, 50%)`;
            confetti.style.animationDuration = (1 + Math.random()) + "s";
            document.body.appendChild(confetti);

            setTimeout(() => confetti.remove(), 2000);
        }
    }

    function speak(text) {
        if ("speechSynthesis" in window) {
            const msg = new SpeechSynthesisUtterance("Bravo");
            msg.lang = "hr-HR";
            msg.text = "Bravo"
            msg.rate = 0.9; // slower so it's clear for kids
            speechSynthesis.speak(msg);
        }
    }

    function handleLetterInput(letter) {
        if (!targetName) return;
        if (!isPlaying) return;

        const upperLetter = letter.toUpperCase();
        if (upperLetter === targetName[currentIndex]) {
            // Correct letter - show big smile emoji
            emojiDisplay.textContent = "üòÑ";
            emojiDisplay.style.transform = "scale(1.2)";

            const boxes = document.querySelectorAll(".box");
            boxes[currentIndex].textContent = upperLetter;
            correctSound.currentTime = 0;
            correctSound.play();
            launchConfetti(10); // small burst for each letter
            currentIndex++;

            // Reset to default smile after a short delay
            setTimeout(() => {
                emojiDisplay.textContent = "üòä";
                emojiDisplay.style.transform = "scale(1)";
            }, 1500);


            if (currentIndex === targetName.length) {
                isPlaying = false;
                setTimeout(() => {
                    boxesContainer.innerHTML = `<div class="bravo">BRAVO üéâ</div>`;
                    launchConfetti(100); // big celebration
                    clapSound.currentTime = 0;
                    clapSound.play();
                    speak("Bravo " + targetName); // üé§ say the word
                }, 300);
            }
        }  else {
            // Wrong letter - show sad emoji
            emojiDisplay.textContent = "üôÅ";
            emojiDisplay.style.transform = "scale(1.1)";

            // Reset to default smile after a short delay
            setTimeout(() => {
                emojiDisplay.textContent = "üòä";
                emojiDisplay.style.transform = "scale(1)";
            }, 1500);
        }
    }

    startBtn.addEventListener("click", () => {
        isPlaying = true;
        targetName = input.value.trim().toUpperCase();
        if (targetName.length === 0) return;
        currentIndex = 0;

        // Display the target name above the boxes
        const targetNameDisplay = document.getElementById("targetNameDisplay");
        targetNameDisplay.textContent = targetName;

        // Reset emoji to default smile
        emojiDisplay.textContent = "üòä";
        emojiDisplay.style.transform = "scale(1)";


        boxesContainer.innerHTML = "";
        for (let i = 0; i < targetName.length; i++) {
            const box = document.createElement("div");
            box.classList.add("box");
            boxesContainer.appendChild(box);
        }
    });

    // Toggle virtual keyboard visibility
    toggleKeyboardBtn.addEventListener("click", () => {
        const isVisible = virtualKeyboard.style.display === "block";
        if (isVisible) {
            virtualKeyboard.style.display = "none";
            toggleKeyboardBtn.textContent = "Show Keyboard";
            toggleKeyboardBtn.classList.remove("active");
        } else {
            virtualKeyboard.style.display = "block";
            toggleKeyboardBtn.textContent = "Hide Keyboard";
            toggleKeyboardBtn.classList.add("active");
        }
    });

    // Handle physical keyboard input
    document.addEventListener("keydown", (e) => {
        handleLetterInput(e.key);
    });

    // Handle virtual keyboard input
    virtualKeyboard.addEventListener("click", (e) => {
        if (e.target.classList.contains("key")) {
            const letter = e.target.dataset.key;
            
            // Add visual feedback
            e.target.classList.add("pressed");
            setTimeout(() => {
                e.target.classList.remove("pressed");
            }, 150);
            
            handleLetterInput(letter);
        }
    });
</script>
</body>
</html>
